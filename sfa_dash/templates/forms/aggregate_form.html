{% import "forms/form_macros.jinja" as form %}
{% extends "dash/data.html" %}
{% block content %}
<script src="/static/js/aggregate-handling.js"></script>
{{ metadata | safe }}
{% include "sections/notifications.html" %}
<h3>Create New Aggregate</h3>
<form action="{{ url_for('forms.create_aggregate') }}" method="post" id="aggregate-form">
  <div class="form-group">
      {% if form_data is not defined %} {% set form_data = {} %}{% endif %}
     <div class="form-element full-width">
       {{ form.input('Name', 'text', 'name', 'Name of the Aggregate.', form_data=form_data) }}
     </div>
     <div class="form-element full-width">
        <label>Description</label><br/>
        <input type="text" class="form-control" name="description">
     </div>
     <div class="form-element">
       {{ form.select('Interval Value Type', 'interval_value_type',
                      {"interval_mean": "Interval Mean",
                       "instantaneous": "Instantaneous"},
                       form_data=form_data) }}
     </div>
     <div class="form-element">
       {{ form.select('Interval Label', 'interval_label',
                      {'beginning': 'Beginning',
                       'ending': 'Ending',
                       'instant': 'Instant'},
                       'Indicates if a time labels the start or the end of an interval.') }}
     </div>
     <div class="form-element">
       {{ form.timedelta('Interval length', 'interval_length',
                         'The length of time that each data point represents. Values must be integers.',
                         form_data=form_data) }}
     </div>
     <div class="form-element">
       {{ form.select('Variable', 'variable',
                      variable_options,
                      form_data=form_data) }}
     </div>

     <h5>Observations</h5>
	 <div class="form-element full-width border" style="border-radius:10px;margin:.5em 1em;">
       <div class="aggregate-observation-list">
         <div class="empty-aggregate-observation-list alert alert-warning">No observations selected</div>
       </div>
       <div class="aggregate-observation-control">
       </div>
	 </div>
    {{ form.token() }}
  </div>
</form>
<button type="submit" form="aggregate-form" value="Submit" class="btn btn-primary">Submit</button>
{% endblock %}

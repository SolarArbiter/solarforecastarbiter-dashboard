{% extends "dash/data.html" %}
{% set page_title = 'Roles' %}
{% block content %}
{% if role is not none %}
{% include 'data/metadata/role_metadata.html' %}
<a role="button" class="btn btn-danger btn-sm" href="{{ url_for('admin.delete_role', uuid=role['role_id']) }}">Delete</a>
<h3>Permissions</h3>
<div class="tools {{ table_type }}-tools mt-1">
   {% block tools %}
   <input type="text" placeholder="Search" class="search">
   {% endblock %}
</div>
<table class="role-permissions-table table results">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Date Added to Role</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for perm_id, perm in role['permissions'].items() %}
      <tr>
          <td><a href="{{ url_for('admin.permission_view', uuid=perm_id) }}">{{ perm['description'] }}</a></td>
          <td>{{ perm['added_to_role'] | format_datetime}}</td>
          <td><a role="button" class="role-permission-delete-button" href="{{ url_for('admin.role_perm_removal', uuid=role['role_id'], permission_id=perm['permission_id']) }}">Remove</a></td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>404 Not Found</p>
{% endif %}
{% endblock %}
